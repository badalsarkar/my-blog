{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/working-wit-telescope/2020-11-6-Working-with-telescope/","result":{"data":{"site":{"siteMetadata":{"title":"Blog of Badal Sarkar"}},"markdownRemark":{"id":"d8734943-d0c0-532d-9e37-970286db2dcc","excerpt":"This week, I have started to work with\nTelescope. Telescope is an open source web server and client application for aggregating\nand presenting a timeline of…","html":"<p>This week, I have started to work with\n<a href=\"https://telescope.cdot.systems/\">Telescope</a>.</p>\n<blockquote>\n<p>Telescope is an open source web server and client application for aggregating\nand presenting a timeline of Seneca’s open source blogs. Telescope makes it\neasy to see what’s happening with open source at Seneca right now.</p>\n</blockquote>\n<p>This month and till the end of the semester, I will be working to fix bugs in Telescope\nor implement new features. This is really exciting to me because Telescope uses\nmany technologies. By working in this project, I will be able to work with these\ntechnologies some of which I have never worked with before.</p>\n<h4>The Setup</h4>\n<p>As Telescope is using many technologies, I thought setting up the development\nenvironment would be a bit difficult. But it was not. The environment <a href=\"https://github.com/Seneca-CDOT/telescope/blob/master/docs/environment-setup.md\">setup</a>\nguideline clearly describes everything that is needed to be done. I followed the\nguide and everything was setup in very short time. Telescope uses <a href=\"https://redis.io/\">Redis</a> and\n<a href=\"https://www.elastic.co/what-is/elasticsearch\">Elasticsearch</a>. I used <a href=\"https://docs.docker.com/get-docker/\">Docker</a>\nto use those. Once everything is setup, I started Redis and Elasticsearch using\nDocker and the backend server with <code class=\"language-text\">npm start</code>. Querying\n<a href=\"http://localhost:3000/posts\">http://localhost:3000/posts</a> returned information about the 10 latest posts in\nTelescope.</p>\n<h4>Using Blink to Check URLs in the Posts in Telescope</h4>\n<p>As part of <a href=\"https://github.com/Seneca-CDOT/topics-in-open-source-2020/wiki/lab-6\">lab\n6</a>, I was\nrequired to use <a href=\"https://github.com/badalsarkar/Blink\">Blink</a> to check all URLs\nmentioned in the latest 10 blog posts in Telescope. There were many ways to do\nthis. I decided to write a <a href=\"https://gist.github.com/badalsarkar/31bdb05c37254a052aed0049538a34e3#file-telescopeurlcheck-sh\">bash\nscript</a>\nwhich will fetch latest posts from Telescope and pipe the contents of the post\nto Blink.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env bash</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token operator\">!</span> <span class=\"token builtin class-name\">command</span> -v jq <span class=\"token operator\">&amp;></span> /dev/null\n<span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"JQ is not installed.\"</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Please install jq by sudo apt install jq.\"</span>\n    <span class=\"token builtin class-name\">exit</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token operator\">!</span> -f ./Blink.jar <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Could not find Blink. Download from https://github.com/badalsarkar/Blink\"</span>\n    <span class=\"token builtin class-name\">exit</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token assign-left variable\">telescopeLatestPostApi</span><span class=\"token operator\">=</span>http://localhost:3000/posts\n<span class=\"token assign-left variable\">data</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s $telescopeLatestPostApi <span class=\"token operator\">|</span> jq <span class=\"token string\">'.[] | .id'</span><span class=\"token variable\">)</span></span>\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token variable\">$data</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">do</span>\n    <span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${i<span class=\"token operator\">%</span>\\\"}</span>\"</span>\n    <span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${i<span class=\"token operator\">#</span>\\\"}</span>\"</span>\n    <span class=\"token builtin class-name\">echo</span> \n    <span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n    <span class=\"token builtin class-name\">echo</span> Checking <span class=\"token variable\">$telescopeLatestPostApi</span>/<span class=\"token variable\">$i</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n    <span class=\"token builtin class-name\">echo</span> \n    <span class=\"token function\">curl</span> -s <span class=\"token variable\">$telescopeLatestPostApi</span>/<span class=\"token variable\">$i</span> <span class=\"token operator\">|</span> java -jar ./Blink.jar -i\n<span class=\"token keyword\">done</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I needed to implement a new feature in Blink, which allows Blink to accept input\nfrom standard input for processing. This was accomplished with very minimal\nchanges. I added a new CLI option <code class=\"language-text\">-i</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c2c833cc4591b9ded69a955999f67ba1/4971b/blinkOptions.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.708860759493675%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABH0lEQVQoz22RWXqDMAyEc/+7tQlgICwJNjZLWLKcYKoRpM1DH+YzyOKXZjgURQ7nLC6XGlVdwroG49ir+j5gvA0IoUXTXKQ2oJMa33nn5XStRT90mOcb7vcFB+8dqFb0Bj2fd6zrvGvR5tfrofVPPR7rrwhj/4ETy7JQID+cplHVyuQsT1HIXRRHOIsT71vdklvfRMsyfQye/zZMM6PqOi8KasuJdWMSmCyVuxTfxy/keaZWaZFO/t9QIGVVaBacyO1oj8BTdEJ+zmFSgySJtY/51ZL3VTKt60oGdBg+M5zkgVD+jM1Sr0Brr4gFYtJEodnuIjGxKBFopZEwqhC8LqJAwgKBAiDsnSGbGqlZ22yn205uRjfD/gOnPXe6I/AHLdgApISUCGEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Blink Options\"\n        title=\"Blink Options\"\n        src=\"/static/c2c833cc4591b9ded69a955999f67ba1/f058b/blinkOptions.png\"\n        srcset=\"/static/c2c833cc4591b9ded69a955999f67ba1/c26ae/blinkOptions.png 158w,\n/static/c2c833cc4591b9ded69a955999f67ba1/6bdcf/blinkOptions.png 315w,\n/static/c2c833cc4591b9ded69a955999f67ba1/f058b/blinkOptions.png 630w,\n/static/c2c833cc4591b9ded69a955999f67ba1/4971b/blinkOptions.png 784w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The following function is the handler function for <code class=\"language-text\">-i</code> option-</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cli</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cli</span><span class=\"token punctuation\">.</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">configureUrlPrinter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BufferedReader</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedReader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InputStreamReader</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">String</span> text <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>text <span class=\"token operator\">=</span> reader<span class=\"token punctuation\">.</span><span class=\"token function\">readLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Checker</span><span class=\"token punctuation\">.</span><span class=\"token function\">check</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Extractor</span><span class=\"token punctuation\">.</span><span class=\"token function\">extractUrlFromText</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Pattern</span><span class=\"token punctuation\">.</span><span class=\"token function\">compile</span><span class=\"token punctuation\">(</span>pattern<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> urlPrinter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>It basically reads from standard input and use\n<a href=\"https://github.com/badalsarkar/Blink/blob/master/src/main/java/com/badalsarkar/Extractor.java\"><code class=\"language-text\">Extractor</code></a>\nand <a href=\"https://github.com/badalsarkar/Blink/blob/master/src/main/java/com/badalsarkar/Checker.java\"><code class=\"language-text\">Checker</code></a> class\nto do the necessary processing. I have added a new class-\n<a href=\"https://github.com/badalsarkar/Blink/blob/master/src/main/java/com/badalsarkar/Extractor.java\"><code class=\"language-text\">Extractor</code></a>\nbut this\nis existing code. I want to refactor some of the things in Blink. The\n<a href=\"https://github.com/badalsarkar/Blink/blob/master/src/main/java/com/badalsarkar/Extractor.java\"><code class=\"language-text\">Extractor</code></a> class will\nreplace\n<a href=\"https://github.com/badalsarkar/Blink/blob/master/src/main/java/com/badalsarkar/FileParser.java\"><code class=\"language-text\">FileParser</code></a>\nclass.</p>\n<p>That was it.</p>\n<h4>The End Result</h4>\n<p>Running the <a href=\"https://gist.github.com/badalsarkar/31bdb05c37254a052aed0049538a34e3#file-telescopeurlcheck-sh\">bash script</a>\nproduces the following output.</p>\n<img src=\"/189a3f54a4f23b0286b716bf18790b3e/BlinkAndTelescope.gif\" width=\"100%\" style=\"display:block; margin-left:auto; margin-right:auto;\">","frontmatter":{"title":"Working with Telescope and Integrating Blink","date":"November 06, 2020","description":null}},"previous":{"fields":{"slug":"/2020/release-02-recap/2020-10-30-Release02-Recap/"},"frontmatter":{"title":"Release 0.2-Recap"}},"next":{"fields":{"slug":"/2020/blink-static-analysis/2020-11-13-Blink-gets-static-analysis-tools/"},"frontmatter":{"title":"Blink Gets Static Analysis Tools"}}},"pageContext":{"id":"d8734943-d0c0-532d-9e37-970286db2dcc","previousPostId":"51b61d71-b18d-5417-b6c9-18ab2dd5b129","nextPostId":"0f204851-9d06-5518-ae56-2578839c5516"}},"staticQueryHashes":["2841359383","916993862"]}